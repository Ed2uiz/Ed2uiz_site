<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Eddie Ruiz">
<meta name="dcterms.date" content="2024-08-20">

<title>Recap of Summer 2024 conference visits in Seattle, WA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand navbar-dark ">
      <div class="navbar-container container-fluid">
          <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../oss/opensource.html" rel="" target="">
 <span class="menu-text">Open Source</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv.html" rel="" target="">
 <span class="menu-text">CV</span></a>
  </li>  
</ul>
          <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">Contact</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Ed2uiz" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/Ed2uiz" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
          <div class="quarto-navbar-tools">
</div>
            <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Recap of Summer 2024 conference visits in Seattle, WA</h1>
            <p class="subtitle lead">Posit 2024 and DuckCon #5</p>
                                <div class="quarto-categories">
                <div class="quarto-category">blog</div>
                <div class="quarto-category">posit</div>
                <div class="quarto-category">duckCon</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Eddie Ruiz </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 20, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#posit-2024-databases-with-r-workshop" id="toc-posit-2024-databases-with-r-workshop" class="nav-link" data-scroll-target="#posit-2024-databases-with-r-workshop">Posit 2024: “Databases with R” workshop</a>
  <ul class="collapse">
  <li><a href="#highlights" id="toc-highlights" class="nav-link" data-scroll-target="#highlights">Highlights</a></li>
  <li><a href="#closing-thoughts" id="toc-closing-thoughts" class="nav-link" data-scroll-target="#closing-thoughts">Closing thoughts</a></li>
  </ul></li>
  <li><a href="#duckcon-2024" id="toc-duckcon-2024" class="nav-link" data-scroll-target="#duckcon-2024">DuckCon 2024</a>
  <ul class="collapse">
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#highlight" id="toc-highlight" class="nav-link" data-scroll-target="#highlight">Highlight</a></li>
  </ul></li>
  <li><a href="#old-friends-new-friends-and-celebrities" id="toc-old-friends-new-friends-and-celebrities" class="nav-link" data-scroll-target="#old-friends-new-friends-and-celebrities">Old friends, new friends, and celebrities</a>
  <ul class="collapse">
  <li><a href="#new-friends" id="toc-new-friends" class="nav-link" data-scroll-target="#new-friends">New Friends</a></li>
  <li><a href="#old-friends" id="toc-old-friends" class="nav-link" data-scroll-target="#old-friends">Old Friends</a></li>
  <li><a href="#celebrities" id="toc-celebrities" class="nav-link" data-scroll-target="#celebrities">Celebrities</a>
  <ul class="collapse">
  <li><a href="#posit-conf" id="toc-posit-conf" class="nav-link" data-scroll-target="#posit-conf">Posit Conf</a></li>
  <li><a href="#duckcon" id="toc-duckcon" class="nav-link" data-scroll-target="#duckcon">DuckCon</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps">Next steps</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="overview" class="level1">
<h1>Overview</h1>
<p>This is a quick and dirty report/recap on my experience attending Posit 2024 and presenting at DuckCon 2024 in Seattle,WA from Aug 11-16, 2024.</p>
<p><strong>TLDR</strong>: I enjoyed meeting many amazing people, learned a lot , Seattle is very bonita.</p>
</section>
<section id="posit-2024-databases-with-r-workshop" class="level1">
<h1>Posit 2024: “Databases with R” workshop</h1>
<ul>
<li><a href="https://github.com/posit-conf-2024/databases/">Link to official Github Repo for workshop content</a></li>
</ul>
<section id="highlights" class="level3">
<h3 class="anchored" data-anchor-id="highlights">Highlights</h3>
<ul>
<li>Use <code>.by</code> in <code>summarize()</code> to avoid using <code>group_by</code> and <code>ungroup</code> which many people forget</li>
<li><a href="https://www.jetbrains.com/lp/mono/"><code>Jetbrains Mono</code></a> font
<ul>
<li>Pretty font for Rstudio!
<ul>
<li><code>&lt;- |&gt; !=</code> are rendered into nice glyphs!
<ul>
<li><img src="db44b315300841c1ad1db1fc50bbd0dc.png" class="img-fluid"></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="https://github.com/gaborcsardi/prompt"><code>gaborcsardi/prompt</code></a>
<ul>
<li>a package for pimpin’ your R console. I added a lightning bolt to mine because I’m cool like that.</li>
<li><code>prompt::set_prompt('⚡ &gt; ')</code>
<ul>
<li><img src="3f6e9c4f066449faa2fa01e0752ae88b.png" class="img-fluid"></li>
</ul></li>
</ul></li>
<li><a href="https://github.com/ddotta/parquetize"><code>ddotta/parquetize</code></a>
<ul>
<li>This R package contains handy functions to export data from a variety of sources into .parquet files! It has convenient arguments to accommodate memory limitations and other constraints that can be very useful
<ul>
<li><code>{arrow}</code> and <code>{duckdb}</code> already offer ways to do this but there are several args that <code>{parquetize}</code> supports that these don’t</li>
</ul></li>
</ul></li>
<li><a href="https://aws.amazon.com/marketplace/pp/prodview-lkdvwqobetjzu"><code>exasol</code></a> database
<ul>
<li>We did not cover this database in the workshop, but I learned about it for the first time here (even though it’s been around for quite some time).</li>
</ul></li>
<li><a href="https://github.com/cynkra/constructive"><code>cynkra/constructive</code></a>
<ul>
<li>Kirilll used <code>constructive::construct()</code> to print out the contents of an R object that contained SQL. It parsed the SQL into the console nicely. I had never heard of <code>dput</code> before this but <code>construct</code> supposedly achieves similar functionality. seems handy for objects that have a lot of SQL in it.</li>
</ul></li>
<li><a href="https://relational.fel.cvut.cz/dataset/CORA">CORA dataset</a>
<ul>
<li>Public dataset in MariaDB with plenty of examples of primary and foreign keys and good ‘data modeling’.</li>
<li>This dataset was covered as an example of how to access a DB through R/DBI with credentials.</li>
</ul></li>
<li><code>r"()"</code>
<ul>
<li>Beginning with R 4.0, you can use the following syntax <code>r"()"</code> to construct raw string literals, this can be handy when writing SQL as alternatives to use <code>{glue}</code> (one less dependency) or <code>paste0()</code>. You don’t have to escape special characters like <code>/</code> or <code>\</code> which can be especially handy for writing file paths.</li>
</ul></li>
<li>… much more that I do not have time to cover in this post. Check out the excellent lecture material at the link above.</li>
</ul>
</section>
<section id="closing-thoughts" class="level3">
<h3 class="anchored" data-anchor-id="closing-thoughts">Closing thoughts</h3>
<ul>
<li>Despite covering a lot of material, this workshop was great. I thought it was well organized and informative. I learned a lot despite already knowing a bit about databases/R. Kirill included several visualizations of the concepts we were learning which made it easier to appreciate how they built on top of each other (one example shown below)! <img src="6c0941d838484439886dd735c9b30217.png" class="img-fluid"></li>
<li>There were several exercises that were included in the workshop that can be found on the Github repo. I thought these were quite helpful and recommend trying these out to refresh your knowledge on the many different ways to interact with databases in R. Oftentimes there are many ways to do the same thing.</li>
</ul>
</section>
</section>
<section id="duckcon-2024" class="level1">
<h1>DuckCon 2024</h1>
<p>When I wasn’t attending posit, I was spending all of my time preparing for my lightning talk at DuckCon2024. I will write a dedicated blog post (and preprint) on this topic very soon, so stay tuned! But here are some of my quick thoughts.</p>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>I had an amazing time at DuckCon. The speakers were great and the venue was really impressive – the screen was huge! After the talks, everyone was invited to gather in the venue for drinks and snacks. I was approached by several kind people and was overwhelmed by how many were interested in my talk. I want to again thank everyone for their interest and I hope to share more on our work very soon.</p>
</section>
<section id="highlight" class="level2">
<h2 class="anchored" data-anchor-id="highlight">Highlight</h2>
<ul>
<li>Earlier in the week at the Posit Databases Workshop, I invited Kirill to my DuckCon talk. Unfortunately, he mentioned that there was a conflict with an R tidy event and so he would not likely be able to attend. To my surprise, I found Kirill after my talk at DuckCon! We managed to find some time to chat outside and I really enjoyed being able to discuss our projects in more detail. I thanked him for all of the incredible contributions he has made to R (i.e.&nbsp;maintaining the duckdb-r repo, creating duckplyr, and much more related to his work leading <a href="https://github.com/cynkra">cynkra</a>).</li>
</ul>
<div id="fig-duckcon-kirill" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="c078ded7445c4d3f96c0b52599eee6ff.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Kirill Müller (right) and I (left) sporting Posit 2024 t-shirts at DuckCon #5 in Seattle, WA with another Posit workshop instructor (center).</figcaption>
</figure>
</div>
</section>
</section>
<section id="old-friends-new-friends-and-celebrities" class="level1">
<h1>Old friends, new friends, and celebrities</h1>
<section id="new-friends" class="level2">
<h2 class="anchored" data-anchor-id="new-friends">New Friends</h2>
<p>I’ve always wondered why academics enjoy attending conferences so much. After attending posit conference, I can now say with confidence that the best part is bumping into other people from other walks of life and learning about their unique background and shared interests. I was lucky to have such an experience when randomly meeting <a href="https://research.fredhutch.org/peters/en/team.html">Jeroen Huyghe</a>, a principal staff scientist at Fred Hutch who does some exciting research on spatial omics and cancer. Jeroen and I bonded over our shared interests in spatial omics at Posit conf and I’m very grateful to have had the opportunity to have lunch with him and learn about his experiences in the spatial omics field, working at Fred Hutch, and discussing the need for better methods for spatial omics analysis. It was a pleasure meeting you Jeroen, hope we can cross paths again in the future!</p>
</section>
<section id="old-friends" class="level2">
<h2 class="anchored" data-anchor-id="old-friends">Old Friends</h2>
<p>At the Posit databases workshop, I had the opportunity to connect with Nick Giangrecco, an old friend and mentor of mine from my good ol days at Columbia. It was great to spending time with you Nick, learning more about our shared interests with DuckDB, and catching up over dumplings. Hope to see you again soon!</p>
<p>It was also great to see Tyrone Lee at both Posit and DuckCon. Thanks Tyrone for your encouragement ahead of my DuckCon talk and for the helpful suggestions.</p>
</section>
<section id="celebrities" class="level2">
<h2 class="anchored" data-anchor-id="celebrities">Celebrities</h2>
<p>In this section I fanboy over some of the amazing people that I met at Posit and DuckCon. Apologies if I forgot to mention you.</p>
<section id="posit-conf" class="level3">
<h3 class="anchored" data-anchor-id="posit-conf">Posit Conf</h3>
<p>In the databases workshop, I was surrounded by several R celebrities including Eric Nantz (https://r-podcast.org/host/enantz/) and Tyler Morgan Wall (https://www.tylermw.com/), among many others! I was also lucky to have sat besides Joe Chang, Hadley Wickham, and JJ Allaire at lunch!</p>
</section>
<section id="duckcon" class="level3">
<h3 class="anchored" data-anchor-id="duckcon">DuckCon</h3>
<ul>
<li>Hannes Mühleisen and Mark Raasveldt, Co-founders of DuckDB.
<ul>
<li>I was very fortunate to meet Hannes and Mark before and after the DuckCon talks. I regret not talking more about DuckDB internals with them, but I hope to meet you again soon Hannes and Mark!</li>
</ul></li>
<li>Jordan Tigani, CEO of MotherDuck
<ul>
<li>I was lucky to have sat beside Jordan at DuckCon. I got to pitch a few ideas to Jordan about doing matrix arithmetic with Motherduck, and hear more about the recent pivot from ‘hybrid execution’ to ‘dual execution’. Shoutout to Frances Perry from Motherduck who gave a great talk, showcasing several new features with Motherduck that I’d like to soon try out.</li>
</ul></li>
<li>Dominik Moritz, creator of Mosaic and Prof at CMU
<ul>
<li>Briefly met Dominik outside of the venue, huge fan of his work and hope to soon support ways to use Mosaic with <code>dbverse</code> objects</li>
</ul></li>
<li>And several others…</li>
</ul>
<div id="fig-duckcon-dinner" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="3f1cf2d281ec41358dcf2fd8c9cf1920.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Obligatory DuckCon speaker dinner selfie at Tavolàta Capitol Hill. Thanks Joe for the great dinner conversations!</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="next-steps" class="level1">
<h1>Next steps</h1>
<ul>
<li>Road to v0.1
<ul>
<li>We released <code>dbMatrix</code> and <code>dbSpatial</code> at DuckCon2024 as ‘developer previews’ with much work yet to do. Below are some changes I will be working on in the coming weeks towards our first 0.1 release.</li>
<li>Release <code>dbData</code>
<ul>
<li><code>dbData</code> will contain shared helper functions across <code>dbverse</code> objects (e.g.&nbsp;caching and saving <code>dbverse</code> objects).</li>
<li>I’m also excited to explore inheriting <code>duckplyr</code> in <code>dbData</code>
<ul>
<li>Issue #86 in <code>duckplyr</code> was recently resolved by Kirill. Now, users can take existing <code>tbl_dbi</code> objects and convert them into the <code>duckplyr</code> framework via <code>as_duckplyr_tibble()</code>!</li>
</ul></li>
</ul></li>
<li><code>dbMatrix</code>
<ul>
<li>Stabilize <code>Arith()</code> and <code>Ops()</code> methods</li>
<li>Support div by 0 operations</li>
<li>Update show() methods</li>
</ul></li>
<li><code>dbSpatial</code>
<ul>
<li>S7 rewrite (TBD)</li>
</ul></li>
</ul></li>
<li><code>dbverse</code> preprint</li>
<li><code>GiottoDB</code>
<ul>
<li>WIP: <a href="https://github.com/drieslab/GiottoDB">drieslab/GiottoDB</a></li>
</ul></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>